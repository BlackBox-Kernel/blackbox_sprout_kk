--- fs/ext4/resize.c
+++ fs/ext4/resize.c
@@ -978,9 +965,9 @@
 		    (err = ext4_journal_restart(handle, EXT4_MAX_TRANS_DATA)))
 			break;
 
-		bh = sb_getblk(sb, ((ext4_fsblk_t)group) * bpg + blk_off);
+		bh = sb_getblk(sb, group * bpg + blk_off);
 		if (!bh) {
-			err = -ENOMEM;
+			err = -EIO;
 			break;
 		}
 		ext4_debug("update metadata backup %#04lx\n",
@@ -1139,7 +1126,7 @@
 	struct ext4_new_group_data *group_data = flex_gd->groups;
 	struct ext4_sb_info *sbi = EXT4_SB(sb);
 	struct ext4_super_block *es = sbi->s_es;
-	int i, ret;
+	int i;
 
 	BUG_ON(flex_gd->count == 0 || group_data == NULL);
 	/*
