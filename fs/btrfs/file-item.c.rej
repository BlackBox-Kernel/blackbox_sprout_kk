--- fs/btrfs/file-item.c
+++ fs/btrfs/file-item.c
@@ -393,7 +393,7 @@
 	ret = 0;
 fail:
 	while (ret < 0 && !list_empty(&tmplist)) {
-		sums = list_entry(tmplist.next, struct btrfs_ordered_sum, list);
+		sums = list_entry(&tmplist, struct btrfs_ordered_sum, list);
 		list_del(&sums->list);
 		kfree(sums);
 	}
